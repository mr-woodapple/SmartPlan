<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="css/style.css" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="1831x1831" href="img/smartplandark.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/smartplandark.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/smartplandark.png">

    <!-- Primary Meta Tags -->
    <title>SMART PLAN - BSZET</title>
    <meta name="title" content="SMART PLAN - BSZET" />
    <meta name="description" content="ORGANIZING WITH EASE" />
    <meta name="msapplication-TileColor" content="#e8ecef">
    <meta name="application-name" content="SMART PLAN">
    <meta name="msapplication-navbutton-color" content="#e8ecef">
    <meta name="msapplication-starturl" content="/">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no">

    <!-- Apple related -->
    <meta name="theme-color" content="#eaecef" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
    <meta name="apple-mobile-web-app-title" content="SMART PLAN">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bszet.me/" />
    <meta property="og:title" content="SMART PLAN - BSZET" />
    <meta property="og:description" content="ORGANIZING WITH EASE" />
    <meta property="og:image" itemprop="image" content="/sp.jpg" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://bszet.me/" />
    <meta property="twitter:title" content="SMART PLAN - BSZET" />
    <meta property="twitter:description" content="ORGANIZING WITH EASE" />
    <meta property="twitter:image" itemprop="image" content="/sp.jpg" />

    <style>
        .red-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: red;
            top: 50%;
        }
    </style>
    
</head>
<body>

    <!-- Nav -->
    <nav class="navbar bg-body-secondary py-3">
        <div class="container-fluid">
            <div class="col-auto d-flex">
                <a class="navbar-brand" href="#" onclick="window.location.href = window.location.href; return false;">
                    <svg class="icon bg-body-secondary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 484.12 438" width="34" height="34">
                        <path d="m0,169.87c.24-1.96.46-3.93.71-5.89,2.38-19.07,9.71-36.01,21.9-50.86,8.4-10.24,18.71-18.11,30.14-24.7,36.53-21.07,73.01-42.24,109.47-63.44,11.4-6.63,22.7-13.42,34.01-20.2,4.92-2.95,10.15-4.78,15.92-4.78,11.02,0,19.26,7.28,20.78,18.18.56,3.97-.03,7.89-.1,11.83-.14,7.53-.24,15.06-.23,22.58,0,6.7.18,13.4.28,20.1v1.08c.56-.3.99-.52,1.4-.76,13.3-7.66,26.55-15.4,39.91-22.95,13.46-7.6,27.63-13.48,42.74-16.98,13.9-3.23,27.95-4.27,42.15-2.94,31.92,2.99,59.57,15.6,82.83,37.57,20.36,19.23,33.34,42.72,39.13,70.15,2.95,14,3.82,28.11,2.4,42.33-2.65,26.6-12.3,50.41-28.88,71.39-11.75,14.86-26.17,26.55-42.57,35.94-8.15,4.67-16.22,9.51-24.16,14.53-5.43,3.43-8.19,8.57-8.25,15.08-.12,12.32-.31,24.64-.38,36.96-.03,5.74.15,11.49.23,17.23.08,6.46-1,12.6-5.11,17.87-2.18,2.79-4.88,5-7.94,6.76-21.37,12.31-42.75,24.61-64.12,36.91-4.65,2.68-9.57,4.49-15,4.53-12.37.08-18.58-9.11-20.13-16.72-1.44-7.08,1.02-12.99,5.8-18.13,3.29-3.53,7.41-5.89,11.52-8.26,14.89-8.57,29.78-17.12,44.68-25.67,3.47-1.99,6.5-4.37,7.82-8.36.9-2.74.8-5.57.76-8.4-.09-8.37-.14-16.74-.17-25.1-.04-10.08,0-20.15-.1-30.23-.09-9.74,4.18-16.86,12.51-21.75,15.53-9.12,31.17-18.05,46.5-27.51,21.21-13.09,35.58-31.67,42.06-55.84,7.27-27.12,3.03-52.74-12.11-76.26-14.22-22.09-34.5-35.94-60.19-41.58-20.88-4.59-41-1.81-60.12,7.51-8.21,4-16.06,8.75-23.98,13.32-44.1,25.44-88.16,50.93-132.24,76.4-12.5,7.22-24.99,14.45-37.5,21.65-3.96,2.28-8.12,3.91-12.78,4.23-10.22.7-19.82-6.89-21.37-17.06-1.39-9.1,2.4-17.56,10.35-22.23,16.07-9.42,32.26-18.65,48.36-28.02,15.32-8.91,30.62-17.84,45.87-26.87,4.69-2.77,7.08-7.19,7.59-12.54.99-10.59.2-21.21.27-31.82,0-.08-.05-.15-.11-.34-.41.21-.81.39-1.2.61-23.95,13.75-47.91,27.48-71.83,41.28-14.88,8.59-29.73,17.22-44.51,25.98-10.74,6.37-19.46,14.82-25.08,26.11-8.1,16.25-7.73,32.56.33,48.71,5.05,10.14,12.3,18.37,22.15,24.12,12.17,7.1,25.23,8.72,38.93,6.06,9.37-1.81,17.73-5.97,25.9-10.73,60.21-35.04,120.47-70.01,180.71-105,7.82-4.54,16.12-7.72,25.14-8.78,9.97-1.17,19.59.29,28.79,4.25,10.99,4.73,20.42,11.51,27.44,21.34,5.59,7.82,8.7,16.59,9.76,26.11,1.08,9.68.37,19.2-2.69,28.48-4.52,13.71-13.4,23.95-25.71,31.17-19.8,11.62-39.73,23.02-59.61,34.51-.11.06-.22.12-.33.18-5.18,2.91-6.51,5.68-5.47,11.52,1.61,9.04,2.54,18.13,2.26,27.32-.7,23.04-8.39,43.33-24,60.46-8.95,9.82-19.52,17.55-30.99,24.15-27.35,15.76-54.69,31.56-82.01,47.38-9.3,5.38-18.97,9.86-29.5,12.22-31.17,6.97-59.43.63-84.61-18.99-9.1-7.09-16.71-15.61-22.56-25.62-1.77-3.03-3.07-6.27-3.64-9.77-1.04-6.33,1.1-11.62,5.4-16.17,2.95-3.11,6.41-5.55,10.1-7.69,44.01-25.5,88.03-51,132.05-76.48,5.58-3.23,11.17-6.44,16.83-9.52,6.45-3.51,13.34-4.74,20.63-3.51,2.77.47,5.1,1.74,7.05,3.73,3.88,3.96,6.49,8.65,7.78,14.01,1.4,5.82-.45,10.85-4.6,14.9-2.27,2.21-4.87,4.2-7.61,5.8-36.1,21.07-72.26,42.05-108.39,63.06-7.66,4.45-15.3,8.93-22.96,13.39-.35.21-.7.42-1.4.84,2.66,1.98,4.99,4.1,7.66,5.65,15.78,9.19,32,10.22,48.25,1.48,30.22-16.26,60.12-33.09,89.32-51.14,5.38-3.32,10.9-6.5,15.89-10.34,11.56-8.92,17.89-20.95,19.39-35.43,2.39-23.26-9.65-46.11-30.27-56.95-17.18-9.03-34.7-8.96-51.79.1-13.26,7.02-26.16,14.73-39.14,22.27-10.03,5.82-20.46,10.61-31.86,12.96-32.98,6.8-62.5-.42-87.82-22.77-16.81-14.83-26.95-33.7-31.16-55.71-.68-3.55-.91-7.17-1.36-10.76-.04-.35-.15-.69-.22-1.04v-11.74.05Zm261.07,26.11c.26.24.39.39.55.52,8.26,6.53,16.54,13.03,24.77,19.61,3.01,2.41,6.11,2.23,9.18.48,14.28-8.11,28.54-16.27,42.76-24.49,6.37-3.68,12.84-7.25,18.93-11.35,13.38-9.02,8.69-24.55-1.21-30.08-6.03-3.37-12.09-2.78-17.94.59-18.22,10.52-36.43,21.07-54.63,31.63-7.45,4.32-14.87,8.68-22.42,13.09h.01Z"/>
                    </svg>
                </a>
            </div>
            
            <!-- Dropdown for available classes -->
            <!-- TODO: Update this to get the available options from what's in the folder "timetables" -->
            <div class="col-auto d-flex">
                <select class="form-select select-timetable" aria-label="Dropdown class selector" style="width:fit-content;">
                    <option selected disabled>Select your class</option>
                    <optgroup label="IT 23/3">
                        <option value="it-23-3-A">C_IT 23/3 A</option>
                        <option value="it-23-3-B">C_IT 23/3 B</option>
                    </optgroup>
                    <optgroup label="IT 23/6">
                        <option value="it-23-6-A">C_IT 23/6 A</option>
                        <option value="it-23-6-B">C_IT 23/6 B</option>
                    </optgroup>
                </select>

                <!--
                <select class="form-select" aria-label="Dropdown language selector">
                        <option value="lang_de">ðŸ‡©ðŸ‡ª</option>
                        <option value="lang_en">ðŸ‡¬ðŸ‡§</option>
                </select>
                -->

            </div>
        </div>
    </nav>

    <div class="container-fluid px-4">

        <!-- Day of week, left & right buttons to go back / forward -->
        <div class="row justify-content-between mt-3">
            <div class="col-auto p-0">
                <button type="button" class="btn btn-primary prev-day"> Prev </button>
            </div>
            <div class="col-auto">
                <h2 class="weekday"> Welcome! </h2>
            </div>
            <div class="col-auto p-0">
                <button type="button" class="btn btn-primary next-day"> Next </button>
            </div>
        </div>

        <!-- Block with the data for that day, iterate over entries for the given weekday, add as many lessons as there are -->
        <div class="lesson-wrapper mt-3">
            <div class="lessons timetable">
                <div class="red-line" id="redLine"></div>
                <!-- JS generated lesson content will replace the following div -->
                <div class="row justify-content-center align-items-center">
                    Select a timetable from the top right to continue.
                    <br><br>
                    <div class="rounded-box">
                        <img src="http://thecatapi.com/api/images/get?format=src&type=gif" alt="Cat Gif">
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="text-center py-3 mt-auto">
        <div class="container footer">
            <p>
                <a href='/CHANGELOG.md'>Changelog</a>
                <span> | </span>
                <a href='https://github.com/mr-woodapple/SmartPlan'>GitHub</a>
            </p>
        </div>
    </footer>
    
    <script type="module" src="js/app.js"></script>
    <!-- Bootstrap scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <script>
        function updateRedLine() {
            const redLine = document.getElementById('redLine');
            const currentTime = new Date();
            
            // Set the time zone to Germany
            const germanyTimeZone = 'Europe/Berlin';
            const options = { timeZone: germanyTimeZone };

            // Get the current time in the specified time zone
            const germanyTime = currentTime.toLocaleString('en-US', options);

            // Extract hours and minutes from the Germany time
            const [hours, minutes] = germanyTime.split(/:| /).map(Number);

            // Adjust for daylight saving time (summer time)
            const isSummerTime = currentTime.getTimezoneOffset() !== new Date(germanyTime).getTimezoneOffset();
            const offset = isSummerTime ? 2 : 1; // Germany is either UTC+1 (winter) or UTC+2 (summer)

            const totalMinutes = (hours + offset) * 60 + minutes;

            // Calculate the position of the red line based on the current time and the timetable width
            const timetableWidth = document.querySelector('.timetable').offsetWidth;
            const position = (totalMinutes / (24 * 60)) * timetableWidth;

            redLine.style.left = position + 'px';
        }

        // Update the red line every minute
        setInterval(updateRedLine, 60000);

        // Initial update when the page loads
        updateRedLine();
    </script>

</body>
</html>
